<div class="container" *ngIf="loginService.currentUser$ | async as user">
    <div class="header">
        <div class="selected-user" (click)="openProfile()">
            <img [src]="userService.selectedUser.avatarUrl" alt="Avatar von {{ userService.selectedUser.name }}">
            {{ userService.selectedUser.name }}
            <span *ngIf="user?.uid === userService.selectedUser.uid">(Du)</span>
        </div>
    </div>

    <div class="chat-field">
        <div class="info">
            <img [src]="userService.selectedUser.avatarUrl" alt="Avatar von {{ userService.selectedUser.name }}"
                class="user-avatar">
            <span>Diese Unterhaltung findet nur zwischen
                <span class="profil" (click)="openProfile()">@{{ userService.selectedUser.name}}</span>
                und dir statt.
            </span>
        </div>
        <div class="messages-cont" *ngFor="let message of messages$ | async">
            <div class="message">
              <img [src]="message.senderId === user.uid ? user.avatarUrl : userService.selectedUser.avatarUrl"
                alt="Avatar von {{ message.senderId === user.uid ? user.name : userService.selectedUser.name }}"
                class="user-avatar">
              <span class="message-text">{{ message.text }}</span>
            </div>
          </div>
    </div>

    <div class="input-box">
        <form (ngSubmit)="sendMessage()">
            <input type="text" [(ngModel)]="messageText" name="messageText" placeholder="Nachricht an {{userService.selectedUser.name}}">
            <div class="icons">
                <div class="icons-left">
                    <mat-icon>add</mat-icon>
                    <div class="seperator"></div>
                    <mat-icon>sentiment_satisfied</mat-icon>
                    <mat-icon>alternate_email</mat-icon>
                </div>
                <button type="submit"><mat-icon class="send-icon">send</mat-icon></button>
            </div>
        </form>
    </div>
</div>